### 対策方法解説
対策方法としては下記の3つが有効です。
1. 利用者がアップロードしたファイルは公開ディレクトリに置かず、アプリケーション経由で閲覧させる。
2. アップロードできるファイルをスクリプト実行の可能性のないものに制限する。（拡張子の制限のみでは十分でない場合があり得ます。）
3. S3などの外部オブジェクトストレージを利用する。

1は公開ディレクトリに置く事によって攻撃者が指定したものを任意に実行できてしまうためで、アプリケーションを通して閲覧をさせる事によってパスの推測をしにくくし、万が一入れてしまった場合でも実行を容易ではなくする事ができます。

2はスクリプトファイルやJavaScriptをアップロードさせない事によってそもそもの問題を防ぐ事ができます。

3は外部のオブジェクトストレージを利用する事によってphpやrubyなどのサーバーの環境に依存し動作する言語の動作を防いでフィアルを配信する事ができます。

このうち１つだけをやって入ればいい訳ではなくできる限り多めの対策が必要です。
